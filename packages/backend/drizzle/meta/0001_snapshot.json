{
  "id": "ed6c8565-3b1b-4617-9d2b-37e509fc54f7",
  "prevId": "cea0060a-ad5d-4a00-9df8-94ef4a875df9",
  "version": "7",
  "dialect": "postgresql",
  "tables": {
    "public.campaign_deliveries": {
      "name": "campaign_deliveries",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true
        },
        "campaign_id": {
          "name": "campaign_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "subscription_id": {
          "name": "subscription_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "device_id": {
          "name": "device_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "status": {
          "name": "status",
          "type": "delivery_status",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "title": {
          "name": "title",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "body": {
          "name": "body",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "payload": {
          "name": "payload",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "ab_test_variant": {
          "name": "ab_test_variant",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "sent_at": {
          "name": "sent_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        },
        "delivered_at": {
          "name": "delivered_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        },
        "opened_at": {
          "name": "opened_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        },
        "clicked_at": {
          "name": "clicked_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        },
        "failed_at": {
          "name": "failed_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        },
        "error_code": {
          "name": "error_code",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "error_message": {
          "name": "error_message",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "provider_message_id": {
          "name": "provider_message_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "provider_response": {
          "name": "provider_response",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "retry_count": {
          "name": "retry_count",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "ttl_expired": {
          "name": "ttl_expired",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        }
      },
      "indexes": {
        "idx_campaign_deliveries_campaign": {
          "name": "idx_campaign_deliveries_campaign",
          "columns": [
            {
              "expression": "campaign_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_campaign_deliveries_status": {
          "name": "idx_campaign_deliveries_status",
          "columns": [
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_campaign_deliveries_subscription": {
          "name": "idx_campaign_deliveries_subscription",
          "columns": [
            {
              "expression": "subscription_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "campaign_deliveries_campaign_id_campaigns_id_fk": {
          "name": "campaign_deliveries_campaign_id_campaigns_id_fk",
          "tableFrom": "campaign_deliveries",
          "tableTo": "campaigns",
          "columnsFrom": ["campaign_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "campaign_deliveries_subscription_id_subscriptions_id_fk": {
          "name": "campaign_deliveries_subscription_id_subscriptions_id_fk",
          "tableFrom": "campaign_deliveries",
          "tableTo": "subscriptions",
          "columnsFrom": ["subscription_id"],
          "columnsTo": ["id"],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "campaign_deliveries_device_id_devices_id_fk": {
          "name": "campaign_deliveries_device_id_devices_id_fk",
          "tableFrom": "campaign_deliveries",
          "tableTo": "devices",
          "columnsFrom": ["device_id"],
          "columnsTo": ["id"],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.campaigns": {
      "name": "campaigns",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "status": {
          "name": "status",
          "type": "campaign_status",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'draft'"
        },
        "campaign_type": {
          "name": "campaign_type",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "title_template": {
          "name": "title_template",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "body_template": {
          "name": "body_template",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "icon_url": {
          "name": "icon_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "image_url": {
          "name": "image_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "badge_url": {
          "name": "badge_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "sound_url": {
          "name": "sound_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "vibrate_pattern": {
          "name": "vibrate_pattern",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "dir": {
          "name": "dir",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "lang": {
          "name": "lang",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "tag": {
          "name": "tag",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "renotify": {
          "name": "renotify",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false
        },
        "require_interaction": {
          "name": "require_interaction",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false
        },
        "silent": {
          "name": "silent",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false
        },
        "actions": {
          "name": "actions",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "click_url": {
          "name": "click_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "target_segment": {
          "name": "target_segment",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "target_expression": {
          "name": "target_expression",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "scheduled_at": {
          "name": "scheduled_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        },
        "timezone": {
          "name": "timezone",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "max_per_hour": {
          "name": "max_per_hour",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 1000
        },
        "max_per_day": {
          "name": "max_per_day",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 5000
        },
        "ttl_seconds": {
          "name": "ttl_seconds",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 86400
        },
        "priority": {
          "name": "priority",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "default": "'normal'"
        },
        "urgency": {
          "name": "urgency",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "default": "'normal'"
        },
        "ab_test_parent_id": {
          "name": "ab_test_parent_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "is_ab_test_master": {
          "name": "is_ab_test_master",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "ab_test_variants": {
          "name": "ab_test_variants",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "created_by": {
          "name": "created_by",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "deleted_at": {
          "name": "deleted_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {},
      "foreignKeys": {
        "campaigns_ab_test_parent_id_campaigns_id_fk": {
          "name": "campaigns_ab_test_parent_id_campaigns_id_fk",
          "tableFrom": "campaigns",
          "tableTo": "campaigns",
          "columnsFrom": ["ab_test_parent_id"],
          "columnsTo": ["id"],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.devices": {
      "name": "devices",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true
        },
        "subscription_id": {
          "name": "subscription_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "user_agent": {
          "name": "user_agent",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "platform": {
          "name": "platform",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "device_type": {
          "name": "device_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "browser_name": {
          "name": "browser_name",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "browser_version": {
          "name": "browser_version",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "os_name": {
          "name": "os_name",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "os_version": {
          "name": "os_version",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "device_model": {
          "name": "device_model",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "device_vendor": {
          "name": "device_vendor",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "screen_resolution": {
          "name": "screen_resolution",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "viewport_width": {
          "name": "viewport_width",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "viewport_height": {
          "name": "viewport_height",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "pixel_ratio": {
          "name": "pixel_ratio",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "network_type": {
          "name": "network_type",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "connection_downlink": {
          "name": "connection_downlink",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "connection_rtt": {
          "name": "connection_rtt",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "save_data": {
          "name": "save_data",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false
        },
        "device_memory": {
          "name": "device_memory",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "cpu_cores": {
          "name": "cpu_cores",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "gpu_vendor": {
          "name": "gpu_vendor",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "battery_level": {
          "name": "battery_level",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "is_charging": {
          "name": "is_charging",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false
        },
        "timezone": {
          "name": "timezone",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "timezone_offset": {
          "name": "timezone_offset",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "supports_actions": {
          "name": "supports_actions",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "supports_images": {
          "name": "supports_images",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "supports_silent": {
          "name": "supports_silent",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "supports_vibrate": {
          "name": "supports_vibrate",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "supports_badge": {
          "name": "supports_badge",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "device_fingerprint": {
          "name": "device_fingerprint",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "session_fingerprint": {
          "name": "session_fingerprint",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "first_seen": {
          "name": "first_seen",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "last_seen": {
          "name": "last_seen",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_devices_subscription": {
          "name": "idx_devices_subscription",
          "columns": [
            {
              "expression": "subscription_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_devices_platform": {
          "name": "idx_devices_platform",
          "columns": [
            {
              "expression": "platform",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_devices_browser": {
          "name": "idx_devices_browser",
          "columns": [
            {
              "expression": "browser_name",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_devices_fingerprint": {
          "name": "idx_devices_fingerprint",
          "columns": [
            {
              "expression": "device_fingerprint",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "devices_subscription_id_subscriptions_id_fk": {
          "name": "devices_subscription_id_subscriptions_id_fk",
          "tableFrom": "devices",
          "tableTo": "subscriptions",
          "columnsFrom": ["subscription_id"],
          "columnsTo": ["id"],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.notification_events": {
      "name": "notification_events",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true
        },
        "event_type": {
          "name": "event_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "campaign_id": {
          "name": "campaign_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "subscription_id": {
          "name": "subscription_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "device_id": {
          "name": "device_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "delivery_id": {
          "name": "delivery_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "title": {
          "name": "title",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "body_hash": {
          "name": "body_hash",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "category": {
          "name": "category",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "user_segment": {
          "name": "user_segment",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "ab_test_group": {
          "name": "ab_test_group",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "timezone": {
          "name": "timezone",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "local_hour": {
          "name": "local_hour",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "day_of_week": {
          "name": "day_of_week",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "platform": {
          "name": "platform",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "browser": {
          "name": "browser",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "network_type": {
          "name": "network_type",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "battery_level": {
          "name": "battery_level",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "time_to_click": {
          "name": "time_to_click",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "time_to_dismiss": {
          "name": "time_to_dismiss",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "experiment_id": {
          "name": "experiment_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "variant_id": {
          "name": "variant_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "attribution_source": {
          "name": "attribution_source",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "attribution_medium": {
          "name": "attribution_medium",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "attribution_campaign": {
          "name": "attribution_campaign",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "metadata": {
          "name": "metadata",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "idx_events_type_date": {
          "name": "idx_events_type_date",
          "columns": [
            {
              "expression": "event_type",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_events_campaign": {
          "name": "idx_events_campaign",
          "columns": [
            {
              "expression": "campaign_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_events_ab_test": {
          "name": "idx_events_ab_test",
          "columns": [
            {
              "expression": "experiment_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "variant_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "notification_events_campaign_id_campaigns_id_fk": {
          "name": "notification_events_campaign_id_campaigns_id_fk",
          "tableFrom": "notification_events",
          "tableTo": "campaigns",
          "columnsFrom": ["campaign_id"],
          "columnsTo": ["id"],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "notification_events_subscription_id_subscriptions_id_fk": {
          "name": "notification_events_subscription_id_subscriptions_id_fk",
          "tableFrom": "notification_events",
          "tableTo": "subscriptions",
          "columnsFrom": ["subscription_id"],
          "columnsTo": ["id"],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "notification_events_device_id_devices_id_fk": {
          "name": "notification_events_device_id_devices_id_fk",
          "tableFrom": "notification_events",
          "tableTo": "devices",
          "columnsFrom": ["device_id"],
          "columnsTo": ["id"],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "notification_events_delivery_id_campaign_deliveries_id_fk": {
          "name": "notification_events_delivery_id_campaign_deliveries_id_fk",
          "tableFrom": "notification_events",
          "tableTo": "campaign_deliveries",
          "columnsFrom": ["delivery_id"],
          "columnsTo": ["id"],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.notification_preferences": {
      "name": "notification_preferences",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true
        },
        "subscription_id": {
          "name": "subscription_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "device_fingerprint": {
          "name": "device_fingerprint",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "opt_in_status": {
          "name": "opt_in_status",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        },
        "opt_in_changed_at": {
          "name": "opt_in_changed_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        },
        "preferred_timezones": {
          "name": "preferred_timezones",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "preferred_hours": {
          "name": "preferred_hours",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "preferred_days": {
          "name": "preferred_days",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "quiet_hours_enabled": {
          "name": "quiet_hours_enabled",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "quiet_hours_start": {
          "name": "quiet_hours_start",
          "type": "time",
          "primaryKey": false,
          "notNull": false
        },
        "quiet_hours_end": {
          "name": "quiet_hours_end",
          "type": "time",
          "primaryKey": false,
          "notNull": false
        },
        "quiet_hours_timezone": {
          "name": "quiet_hours_timezone",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "max_per_hour": {
          "name": "max_per_hour",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 3
        },
        "max_per_day": {
          "name": "max_per_day",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 10
        },
        "max_per_week": {
          "name": "max_per_week",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 50
        },
        "categories_enabled": {
          "name": "categories_enabled",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'[]'"
        },
        "categories_disabled": {
          "name": "categories_disabled",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'[]'"
        },
        "enable_sound": {
          "name": "enable_sound",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": true
        },
        "enable_vibration": {
          "name": "enable_vibration",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": true
        },
        "enable_badge": {
          "name": "enable_badge",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": true
        },
        "enable_images": {
          "name": "enable_images",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": true
        },
        "dnd_until": {
          "name": "dnd_until",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        },
        "dnd_reason": {
          "name": "dnd_reason",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "auto_optimize": {
          "name": "auto_optimize",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "last_optimized_at": {
          "name": "last_optimized_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_preferences_subscription": {
          "name": "idx_preferences_subscription",
          "columns": [
            {
              "expression": "subscription_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_preferences_fingerprint": {
          "name": "idx_preferences_fingerprint",
          "columns": [
            {
              "expression": "device_fingerprint",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "notification_preferences_subscription_id_subscriptions_id_fk": {
          "name": "notification_preferences_subscription_id_subscriptions_id_fk",
          "tableFrom": "notification_preferences",
          "tableTo": "subscriptions",
          "columnsFrom": ["subscription_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "notification_preferences_subscription_id_unique": {
          "name": "notification_preferences_subscription_id_unique",
          "nullsNotDistinct": false,
          "columns": ["subscription_id"]
        },
        "notification_preferences_device_fingerprint_unique": {
          "name": "notification_preferences_device_fingerprint_unique",
          "nullsNotDistinct": false,
          "columns": ["device_fingerprint"]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.subscriptions": {
      "name": "subscriptions",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true
        },
        "endpoint": {
          "name": "endpoint",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "p256dh": {
          "name": "p256dh",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "auth": {
          "name": "auth",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "user_agent": {
          "name": "user_agent",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "metadata": {
          "name": "metadata",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "status": {
          "name": "status",
          "type": "subscription_status",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'active'"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "subscriptions_endpoint_unique": {
          "name": "subscriptions_endpoint_unique",
          "nullsNotDistinct": false,
          "columns": ["endpoint"]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.traffic_events": {
      "name": "traffic_events",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true
        },
        "url": {
          "name": "url",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "method": {
          "name": "method",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "headers": {
          "name": "headers",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "body": {
          "name": "body",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "source": {
          "name": "source",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "metadata": {
          "name": "metadata",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.vapid_config": {
      "name": "vapid_config",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true,
          "default": "'default'"
        },
        "public_key": {
          "name": "public_key",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "private_key": {
          "name": "private_key",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "subject": {
          "name": "subject",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    }
  },
  "enums": {
    "public.campaign_status": {
      "name": "campaign_status",
      "schema": "public",
      "values": ["draft", "scheduled", "sending", "completed", "paused"]
    },
    "public.delivery_status": {
      "name": "delivery_status",
      "schema": "public",
      "values": ["pending", "sent", "delivered", "opened", "clicked", "failed", "bounced"]
    },
    "public.subscription_status": {
      "name": "subscription_status",
      "schema": "public",
      "values": ["active", "inactive", "failed"]
    }
  },
  "schemas": {},
  "sequences": {},
  "roles": {},
  "policies": {},
  "views": {},
  "_meta": {
    "columns": {},
    "schemas": {},
    "tables": {}
  }
}
